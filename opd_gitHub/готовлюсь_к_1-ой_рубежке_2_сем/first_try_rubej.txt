ORG 0x0020
START:
  CLA
  ST COUNTER1
  ST COUNTER2

REAL_STRT:
  LD (I)+
  AND CLEAN_GRB
  ST CUR_EL
  AND IS_NEG
  BNE MINUS
  JUMP PLUS
RETURN:
  CALL FUNC
  LOOP LENGHT
  JUMP REAL_STRT
  HLT

MINUS:
  LD CUR_EL
  OR EXT_SIGN
  ST CUR_EL
  LD #0xFF
  ST NUM22
  JUMP RETURN

PLUS:
  CLA
  ST NUM22
  JUMP RETURN

FUNC:
  LD #0x0D
  ST CONST_13
  CLA
  ST TMP_RES
MULT_LOOP:
  LD TMP_RES
  ADD CUR_EL
  ST TMP_RES
  LOOP CONST_13
  JUMP MULT_LOOP
  LD TMP_RES
  ADD CONST_137
  ADD COUNTER1
  ST COUNTER1
  LD COUNTER2
  ADC NUM22
  ST COUNTER2
  LD COUNTER1
  ST (J)+
  LD COUNTER2
  ST (J)+
  RET



CUR_EL: WORD 0x0000
NUM22: WORD 0x0000
COUNTER1: WORD 0x0000
COUNTER2: WORD 0x0000

CLEAN_GRB: WORD 0x01FF
LENGHT: WORD 0x000F
IS_NEG: WORD 0x0100
EXT_SIGN: WORD 0xFE00
TMP_RES: WORD 0x0000

CONST_13: WORD 0x000D
CONST_137: WORD 0x0089

J: WORD 0x0400
I: WORD 0x06DA
